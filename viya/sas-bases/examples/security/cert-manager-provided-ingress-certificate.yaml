## Example PatchTransformer to patch the secret used by nginx ingress objects
##
## In the following code, the locations that require user specified values are indicated by a capitalized and
## hyphenated name set off by curly braces and a space at each end. You should replace this token with the
## actual value.
## Replace the curly braces, interior spaces, and the variable name.
## For instance, "{{ CERT-MANAGER_ISSUER_NAME Example: sas-viya-issuer }}"
## should be replaced with the name of the cert-manager issuer that will issue certificates used to make
## TLS connections to the SAS Viya applications.
## The name of the token is intended to provide a suitable example.  If you are following the suggested example
## the correct, final syntax would be:
## value: sas-viya-issuer
##
##
---
apiVersion: builtin
kind: PatchTransformer
metadata:
  name: sas-cert-manager-ingress-annotation-transformer
patch: |-
  - op: add
    path: /metadata/annotations/cert-manager.io~1issuer
    value: {{ CERT-MANAGER_ISSUER_NAME }} # name of the cert-manager issuer that will supply the ingress cert
target:
  kind: Ingress
  name: .*
