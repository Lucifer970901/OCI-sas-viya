# This block of code is for changing the user that CAS runs as. By default
# the cas container and processes run as 1001 (sas). By modifying the runAsUser
# and runAsGroup securityContext options, you can set the user ID and group ID,
# respectively. The user ID and group ID are only used for the CAS container and
# not for any other containers in the pod.
---
apiVersion: builtin
kind: PatchTransformer
metadata:
  name: cas-modify-user
patch: |-
   - op: replace
     path: /spec/controllerTemplate/spec/securityContext/runAsUser
     value:
       1001
   - op: replace
     path: /spec/controllerTemplate/spec/securityContext/runAsGroup
     value:
       1001
   - op: replace
     path: /spec/controllerTemplate/spec/securityContext/fsGroup
     value:
       1001
target:
  group: viya.sas.com
  kind: CASDeployment
  name: .*
  version: v1alpha1