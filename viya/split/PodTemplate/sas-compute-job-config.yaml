---
apiVersion: v1
kind: PodTemplate
metadata:
  annotations:
    sas.com/certificate-file-format: pem
    sas.com/component-name: sas-compute
    sas.com/component-version: 1.8.5-20200902.1599084232929
    sas.com/config-init-mode: initcontainer
    sas.com/kustomize-base: podtemplate
    sas.com/sas-access-config: "true"
    sas.com/version: 1.8.5
  labels:
    sas.com/admin: cluster-local
    sas.com/deployment: sas-viya
    sas.com/template-intent: sas-launcher
    workload.sas.com/class: compute
  name: sas-compute-job-config
  namespace: viya
template:
  metadata:
    annotations:
      sas.com/certificate-file-format: pem
      sidecar.istio.io/inject: "false"
    labels:
      launcher.sas.com/job-type: compute-server
  spec:
    affinity:
      nodeAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - preference:
            matchExpressions:
            - key: workload.sas.com/class
              operator: In
              values:
              - compute
            matchFields: []
          weight: 100
        - preference:
            matchExpressions:
            - key: workload.sas.com/class
              operator: NotIn
              values:
              - cas
              - stateless
              - stateful
            matchFields: []
          weight: 50
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchExpressions:
            - key: kubernetes.azure.com/mode
              operator: NotIn
              values:
              - system
            matchFields: []
    containers:
    - args: []
      command: []
      env:
      - name: SAS_LICENSE
        valueFrom:
          secretKeyRef:
            key: SAS_LICENSE
            name: sas-license-9bdtc8b894
      - name: SAS_URL_SERVICE_TEMPLATE
        valueFrom:
          configMapKeyRef:
            key: SAS_URL_SERVICE_TEMPLATE
            name: sas-shared-config-5gc9794df6
      - name: SASCLOUDNATIVE
        value: "1"
      - name: LAUNCH_AS_JOB
        value: "true"
      - name: COMPUTESERVER_USER_CONFIG
        value: /config
      - name: COMPUTESERVER_VAR_PATH
        value: /viya
      envFrom:
      - configMapRef:
          name: sas-access-config-782dbg98k8
      - configMapRef:
          name: sas-compute-server-config-f8c9c759bf
      image: cr.sas.com/viya-4-x64_oci_linux_2-docker/sas-programming-environment:1.8.2-20200908.1599615198811
      name: sas-programming-environment
      ports: []
      volumeDevices: []
      volumeMounts:
      - mountPath: /sasuser
        name: sasuser
      - mountPath: /sashelp
        name: sashelp
      - mountPath: /config
        name: config
      - mountPath: /viya
        name: viya
      - mountPath: /rdutil
        name: sas-rdutil-dir
      - mountPath: /opt/sas/viya/home/share/refdata/qkb
        name: sas-quality-knowledge-base-volume
    hostAliases: []
    imagePullSecrets:
    - name: sas-image-pull-secrets-bh7kmc9288
    initContainers:
    - args: []
      command: []
      env: []
      envFrom:
      - configMapRef:
          name: sas-go-config-fb6bgt2k78
      - configMapRef:
          name: sas-shared-config-5gc9794df6
      - configMapRef:
          name: sas-compute-server-config-f8c9c759bf
      image: cr.sas.com/viya-4-x64_oci_linux_2-docker/sas-config-init:1.2.6-20200928.1601307316387
      name: sas-config-init
      ports: []
      volumeDevices: []
      volumeMounts:
      - mountPath: /config
        name: config
    readinessGates: []
    tolerations:
    - effect: NoSchedule
      key: workload.sas.com/class
      operator: Equal
      value: compute
    volumes:
    - emptyDir: {}
      name: sasuser
    - emptyDir: {}
      name: sashelp
    - emptyDir: {}
      name: config
    - emptyDir: {}
      name: viya
    - name: sas-quality-knowledge-base-volume
      persistentVolumeClaim:
        claimName: sas-quality-knowledge-base
    - configMap:
        defaultMode: 493
        name: sas-reference-data-scripts
      name: sas-rdutil-dir
